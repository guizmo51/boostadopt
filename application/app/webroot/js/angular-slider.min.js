/*
 angular-slider v0.3.0 
 (c) 2013-2014 Venturocket, Inc. http://github.com/Venturocket 
 License: MIT 
*/
window.AngularSlider=function(a,b,c){function d(a){n.cssText=a}function e(a,b){return typeof a===b}function f(){j.inputtypes=function(a){for(var d,e,f,g=0,h=a.length;h>g;g++)o.setAttribute("type",e=a[g]),d="text"!==o.type,d&&(o.value=p,o.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(e)&&o.style.WebkitAppearance!==c?(k.appendChild(o),f=b.defaultView,d=f.getComputedStyle&&"textfield"!==f.getComputedStyle(o,null).WebkitAppearance&&0!==o.offsetHeight,k.removeChild(o)):/^(search|tel)$/.test(e)||(d=/^(url|email)$/.test(e)?o.checkValidity&&o.checkValidity()===!1:o.value!=p)),r[a[g]]=!!d;return r}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var g,h,i="2.7.1",j={},k=b.documentElement,l="modernizr",m=b.createElement(l),n=m.style,o=b.createElement("input"),p=":)",q=({}.toString,{}),r={},s=[],t=s.slice,u={}.hasOwnProperty;h=e(u,"undefined")||e(u.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return u.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=t.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(t.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(t.call(arguments)))};return d});for(var v in q)h(q,v)&&(g=v.toLowerCase(),j[g]=q[v](),s.push((j[g]?"":"no-")+g));return j.input||f(),j.addTest=function(a,b){if("object"==typeof a)for(var d in a)h(a,d)&&j.addTest(d,a[d]);else{if(a=a.toLowerCase(),j[a]!==c)return j;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(k.className+=" "+(b?"":"no-")+a),j[a]=b}return j},d(""),m=o=null,j._version=i,j}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==q.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=r.shift();s=1,a?a.t?o(function(){("c"==a.t?m.injectCss:m.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):s=0}function i(a,c,d,e,f,i,j){function k(b){if(!n&&g(l.readyState)&&(t.r=n=1,!s&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&o(function(){v.removeChild(l)},50);for(var d in A[c])A[c].hasOwnProperty(d)&&A[c][d].onload()}}var j=j||m.errorTimeout,l=b.createElement(a),n=0,q=0,t={t:d,s:c,e:f,a:i,x:j};1===A[c]&&(q=1,A[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,q)},r.splice(e,0,t),"img"!=a&&(q||2===A[c]?(v.insertBefore(l,u?null:p),o(k,j)):A[c].push(l))}function j(a,b,c,d,f){return s=0,b=b||"j",e(a)?i("c"==b?x:w,a,b,this.i++,c,d,f):(r.splice(this.i++,0,a),1==r.length&&h()),this}function k(){var a=m;return a.loader={load:j,i:0},a}var l,m,n=b.documentElement,o=a.setTimeout,p=b.getElementsByTagName("script")[0],q={}.toString,r=[],s=0,t="MozAppearance"in n.style,u=t&&!!b.createRange().compareNode,v=u?n:p.parentNode,n=a.opera&&"[object Opera]"==q.call(a.opera),n=!!b.attachEvent&&!n,w=t?"object":n?"script":"img",x=n?"script":w,y=Array.isArray||function(a){return"[object Array]"==q.call(a)},z=[],A={},B={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};m=function(a){function b(a){var b,c,d,a=a.split("!"),e=z.length,f=a.pop(),g=a.length,f={url:f,origUrl:f,prefixes:a};for(c=0;g>c;c++)d=a[c].split("="),(b=B[d.shift()])&&(f=b(f,d));for(c=0;e>c;c++)f=z[c](f);return f}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(A[i.url]?i.noexec=!0:A[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),A[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}),g(a,l,b,0,j);else if(Object(a)===a)for(i in h=function(){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}(),a)a.hasOwnProperty(i)&&(!c&&!--h&&(d(l)?l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}:l[i]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),n()}}(m[i])),g(a[i],l,b,i,j))}else!c&&n()}var h,i,j=!!a.test,k=a.load||a.both,l=a.callback||f,m=l,n=a.complete||f;c(j?a.yep:a.nope,!!k),k&&c(k)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(y(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):y(j)?m(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},m.addPrefix=function(a,b){B[a]=b},m.addFilter=function(a){z.push(a)},m.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",l=function(){b.removeEventListener("DOMContentLoaded",l,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k,l,n=b.createElement("script"),e=e||m.errorTimeout;n.src=a;for(l in d)n.setAttribute(l,d[l]);c=j?h:c||f,n.onreadystatechange=n.onload=function(){!k&&g(n.readyState)&&(k=1,c(),n.onload=n.onreadystatechange=null)},o(function(){k||(k=1,c(1))},e),i?n.onload():p.parentNode.insertBefore(n,p)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(p.parentNode.insertBefore(e,p),o(c,0))}}(this,document),AngularSlider.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},angular.module("vr.directives.slider",["ngTouch"]).directive("slider",["$timeout","$document","$interpolate","$swipe",function(a,b,c,d){function e(a){return angular.element(a)}function f(a){return""+a+"px"}function g(a,b){return a.css({opacity:b})}function h(a){return g(a,0)}function i(a){return g(a,1)}function j(a,b){return a.css({left:b})}function k(a){var b=parseFloat(a.css("width"));return isNaN(b)?a[0].offsetWidth:b}function l(a){return k(a)/2}function m(a){try{return a.offset().left}catch(b){}return a[0].getBoundingClientRect().left}function n(a,b){return m(a)>m(b)?m(a)-m(b)-k(b):m(b)-m(a)-k(a)}function o(a,b){return a.attr("ng-bind-template",b)}function p(a,b,c,d,e){(angular.isUndefined(b)||!b)&&(b=0),(angular.isUndefined(c)||!c||0==c)&&(c=1/Math.pow(10,b)),(angular.isUndefined(d)||!d)&&(d=0),(angular.isUndefined(a)||!a)&&(a=0);var f=(a-d)%c,g=f>c/2?a+c-f:a-f;return(angular.isUndefined(e)||!e)&&(e=g),g=Math.min(Math.max(g,d),e),parseFloat(g.toFixed(b))}function q(a,b){return Math.floor(a/b+.5)*b}function r(a,b){return a>0&&!isNaN(b)?Math.ceil(b/a)*a:b}function s(a){return u+" "+a+" "+v}var t=3,u=c.startSymbol(),v=c.endSymbol();return{restrict:"EA",require:"ngModel",scope:{floor:"@",ceiling:"@",step:"@",precision:"@",buffer:"@",stickiness:"@",showSteps:"@",ngModel:"=",ngModelRange:"=",ngDisabled:"=",ngChange:"&",translateFn:"&",translateRangeFn:"&",translateCombinedFn:"&",scaleFn:"&",inverseScaleFn:"&"},template:"<span class='bar full'></span><span class='bar steps'><span class='bubble step' ng-repeat='step in stepBubbles()'></span></span><span class='bar selection'></span><span class='bar unselected low'></span><span class='bar unselected high'></span><span class='pointer low'></span><span class='pointer high'></span><span class='bubble low'></span><span class='bubble high'></span><span class='bubble middle'></span><span class='bubble selection'></span><span class='bubble limit floor'></span><span class='bubble limit ceiling'></span><input type='range' class='input low' /><input type='range' class='input high' /><input type='range' class='input selection' />",compile:function(c,g){function u(a){a||(a=c);var b=[];return angular.forEach(a.children(),function(a){b.push(e(a))}),b}function v(a,b,c){return{fullBar:a[0],stepBubs:a[1],selBar:b?a[2]:null,unSelBarLow:b?a[3]:null,unSelBarHigh:b?a[4]:null,minPtr:b?a[5]:a[2],maxPtr:b?a[6]:null,lowBub:b?a[7]:a[3],highBub:b?a[8]:null,cmbBub:b?a[9]:null,selBub:b?a[10]:null,flrBub:b?a[11]:a[4],ceilBub:b?a[12]:a[5],minInput:c?b?a[13]:a[6]:null,maxInput:c?b?a[14]:null:null,selInput:c?b?a[15]:null:null}}var w=g.showSteps,x=null!=g.ngModelRange,y={},z="ngModel",A="ngModelRange",B="selectBar",C=["floor","ceiling","stickiness",z];if(y=function(){for(var a=u(),b=[],c=0,d=a.length;d>c;c++){var f=a[c];f=e(f),f.css({"white-space":"nowrap",position:"absolute",display:"block","z-index":1}),b.push(f)}return b}(),y=v(y,!0,!0),g.translateFn&&g.$set("translateFn",""+g.translateFn+"(value)"),g.translateRangeFn&&g.$set("translateRangeFnFn",""+g.translateRangeFn+"(low,high)"),g.translateCombinedFn&&g.$set("translateCombinedFnFn",""+g.translateCombinedFn+"(low,high)"),g.scaleFn&&g.$set("scaleFn",""+g.scaleFn+"(value)"),g.inverseScaleFn&&g.$set("inverseScaleFn",""+g.inverseScaleFn+"(value)"),y.fullBar.css({left:0,right:0}),AngularSlider.inputtypes.range){var D={position:"absolute",margin:0,padding:0,opacity:0,height:"100%"};y.minInput.attr("step",s("inputSteps()")),y.minInput.attr("min",s("floor")),y.minInput.css(D),y.minInput.css("left",0),x?(y.minInput.attr("max",s("ngModelRange - (buffer / 2)")),y.maxInput.attr("step",s("inputSteps()")),y.maxInput.attr("min",s("ngModel + (buffer / 2)")),y.maxInput.attr("max",s("ceiling")),y.maxInput.css(D),y.selInput.attr("step",s("inputSteps()")),y.selInput.attr("min",s("ngModel")),y.selInput.attr("max",s("ngModelRange")),y.selInput.css(D)):(y.minInput.attr("max",s("ceiling")),y.minInput.css({width:"100%"}),y.maxInput.remove(),y.selInput.remove())}else y.minInput.remove(),y.maxInput.remove(),y.selInput.remove();if(o(y.stepBubs.children().eq(0),s("translation(step)")),o(y.ceilBub,s("translation(ceiling)")),o(y.flrBub,s("translation(floor)")),o(y.selBub,s("rangeTranslation("+z+","+A+")")),o(y.lowBub,s("translation("+z+")")),o(y.highBub,s("translation("+A+")")),o(y.cmbBub,s("combinedTranslation("+z+","+A+")")),x)C.push(A),C.unshift("buffer");else for(var E=[y.selBar,y.unSelBarLow,y.unSelBarHigh,y.maxPtr,y.selBub,y.highBub,y.cmbBub],F=0,G=E.length;G>F;F++)c=E[F],c.remove();return C.unshift("precision","step"),w||y.stepBubs.children().remove(),{post:function(c,g,o,s){function w(){if(angular.forEach(C,function(a){c[a]=parseFloat(c[a]),a==z||a==A?c[a]=p(c[a],c.precision,c.step,c.floor,c.ceiling):"buffer"==a?c.buffer=!c.buffer||isNaN(c.buffer)||c.buffer<0?0:r(c.step,c.buffer):"precision"==a?c.precision=!c.precision||isNaN(c.precision)?0:parseInt(c.precision):"step"==a?c.step=!c.step||isNaN(c.step)?1/Math.pow(10,c.precision):parseFloat(c.step.toFixed(c.precision)):"stickiness"==a&&(isNaN(c.stickiness)?c.stickiness=t:c.stickiness<1&&(c.stickiness=1)),c.decodedValues[a]=c.decodeRef(a)}),x){if(c[A]<c[z]){var a=c[A];c[A]=c[z],c[z]=a}var b=p(c[A]-c[z],c.precision,c.step);if(c.buffer>0&&b<c.buffer){var d=c.encode((c.decodedValues[z]+c.decodedValues[A])/2);c[z]=p(d-c.buffer/2,c.precision,c.step,c.floor,c.ceiling),c[A]=c[z]+c.buffer,c[A]>c.ceiling&&(c[A]=c.ceiling,c[z]=c.ceiling-c.buffer)}}E=k(D.fullBar),F=l(D.minPtr),G=m(D.fullBar),H=G+E-k(D.minPtr),I=H-G,J=c.floor,K=c.decodedValues.floor,L=c.ceiling,M=c.decodedValues.ceiling,N=L-J,O=M-K,P=q(O,c.decodedValues.step)}function y(){function a(a){return 100*((a-G)/I)}function o(b){return a(b)/100*O+K}function r(a){return c.encode(o(a))}function t(a){var b=a-K;return N==O?b=q(b,c.decodedValues.step)/P:b/=O,100*b}function u(a){return t(c.decode(a))}function v(a){return f(a*I/100)}function y(a){return Math.min(Math.max(a,G),H)}function C(b){return j(b,v(a(y(m(b)))))}function M(a,b,d){var e=a>0?1:-1;return b=b?b:100,d?(Math.sin(Math.min(Math.abs(a/b),1)*Math.PI-Math.PI/2)+1)*e*b/6:e*Math.pow(Math.min(Math.abs(2*(a/b)),1),c.stickiness)*b/2}function T(){var b=t(c.decodedValues[z]),d=u(c[z]+c.step)-b,e=b-u(c[z]-c.step),f=u(c[z]+c.buffer)-b,g=a(F+G),h=b+M(Q,Q>0?d:e);if(j(D.minPtr,v(h)),j(D.lowBub,v(a(m(D.minPtr)-l(D.lowBub)+F))),x){var i=t(c.decodedValues[A]),k=u(c[A]+c.step)-i,n=i-u(c[A]-c.step),o=i-u(c[A]-c.buffer),p=i+M(R,R>0?k:n);if(h>i-o&&(h=b+M(Q,f,!0),j(D.minPtr,v(h)),j(D.lowBub,v(a(m(D.minPtr)-l(D.lowBub)+F)))),b+f>p&&(p=i+M(R,o,!0)),j(D.maxPtr,v(p)),j(D.highBub,v(a(m(D.maxPtr)-l(D.highBub)+F))),j(D.selBar,v(h+g)),D.selBar.css({width:v(p-h)}),j(D.selBub,v((h+p)/2-a(l(D.selBub)+G)+g)),j(D.cmbBub,v((h+p)/2-a(l(D.cmbBub)+G)+g)),D.unSelBarLow.css({left:0,width:v(h+g)}),j(D.unSelBarHigh,v(p+g)),D.unSelBarHigh.css({right:0}),AngularSlider.inputtypes.range){var q=2*g,r=h+f/2,s=100-r;r+=q;var w=p-o/2,y=h+q,B=p-h-q;h+q>=p&&(y=h,B=p+q-h),D.minInput.css({width:v(w)}),D.maxInput.css({left:v(r),width:v(s)}),D.selInput.css({left:v(y),width:v(B)})}}}function U(){var a=D.lowBub;C(D.lowBub),x&&(C(D.highBub),C(D.selBub),n(D.lowBub,D.highBub)<10?(h(D.lowBub),h(D.highBub),i(D.cmbBub),C(D.cmbBub),a=D.cmbBub):(i(D.lowBub),i(D.highBub),h(D.cmbBub),a=D.highBub)),n(D.flrBub,D.lowBub)<5?h(D.flrBub):x?n(D.flrBub,a)<5?h(D.flrBub):i(D.flrBub):i(D.flrBub),n(D.lowBub,D.ceilBub)<5?h(D.ceilBub):x?n(a,D.ceilBub)<5?h(D.ceilBub):i(D.ceilBub):i(D.ceilBub)}function V(){Q=0,R=0,ab&&(T(),U(),ab.removeClass("active")),ab=null,bb=null,Z=!1}function W(b){ab&&c.$apply(function(){var d=b.clientX||b.x;if(Z){var e=r(d)-$,f=r(d)+_;J>e?(f+=J-e,e=J):f>L&&(e-=f-L,f=L);var h=u(e),i=u(f);Q=h,R=i,c[z]=e=p(e,c.precision,c.step,c.floor,c.ceiling),c[A]=f=p(f,c.precision,c.step,c.floor,c.ceiling),Q-=u(e),R-=u(f)}else{var j=y(d+G-m(g)-l(ab)),k=a(j),n=c.encode(K+O*k/100);if(Q=k,x)if(c.buffer>0)bb===z?n>c[A]-c.buffer&&(n=c[A]-c.buffer):n<c[z]+c.buffer&&(n=c[z]+c.buffer);else if(bb===z){if(n>c[A]){c[z]=c[A],c.decodedValues[z]=c.decodeRef(z),bb=A;var o=D.minPtr;D.minPtr=D.maxPtr,D.maxPtr=o,D.maxPtr.removeClass("active").removeClass("high").addClass("low"),D.minPtr.addClass("active").removeClass("low").addClass("high")}}else if(n<c[z]){c[A]=c[z],c.decodedValues[A]=c.decodeRef(A),bb=z;var o=D.minPtr;D.minPtr=D.maxPtr,D.maxPtr=o,D.minPtr.removeClass("active").removeClass("low").addClass("high"),D.maxPtr.addClass("active").removeClass("high").addClass("low")}c[bb]=n=p(n,c.precision,c.step,c.floor,c.ceiling),c.decodedValues[bb]=c.decodeRef(bb),bb===z?(Q-=u(n),R=0):(R=Q-u(n),Q=0)}c.ngChange&&c.ngChange(),s.$setViewValue(c[z]),T(),U()})}function X(a,b,d){if(!c.ngDisabled||1!=c.ngDisabled){var e=a.clientX||a.x;if(ab=b,bb=d,ab.addClass("active"),bb==B){Z=!0;var f=r(e);$=f-c[z],_=c[A]-f}W(a)}}function Y(){function a(a,b,c){function f(a){X(a,b,c)}function g(a){W(a),V()}a=e(a),d.bind(a,{start:f,move:W,end:g,cancel:V})}function c(a,b,c){a=e(a),c=angular.isUndefined(c)?a:e(c),d.bind(a,{start:function(a){X(a,c,b)}})}function f(a){a=e(a),d.bind(a,{move:W,end:function(a){W(a),V()},cancel:V})}AngularSlider.inputtypes.range?(a(D.minInput,D.minPtr,z),x&&(a(D.maxInput,D.maxPtr,A),a(D.selInput,D.selBar,B))):(f(b),c(D.minPtr,z),c(D.lowBub,z),c(D.flrBub,z,D.minPtr),x?(c(D.maxPtr,A),c(D.highBub,A),c(D.ceilBub,A,D.maxPtr),c(D.selBar,B),c(D.selBub,B,D.selBar),c(D.unSelBarLow,z,D.minPtr),c(D.unSelBarHigh,A,D.maxPtr)):(c(D.ceilBub,z,D.minPtr),c(D.fullBar,z,D.minPtr)))}var Z,$,_,ab,bb;w(),j(D.flrBub,0),j(D.ceilBub,f(E-k(D.ceilBub))),T(),U(),S||(Y(),S=!0)}var D=v(u(g),x,AngularSlider.inputtypes.range);c.decodedValues={floor:0,ceiling:0,step:0,precision:0,buffer:0,stickiness:0,ngModel:0,ngModelRange:0},c.translation=function(a){return a=parseFloat(a).toFixed(c.precision),angular.isUndefined(o.translateFn)?""+a:c.translateFn({value:a})},c.rangeTranslation=function(a,b){return angular.isUndefined(o.translateRangeFn)?"Range: "+c.translation((b-a).toFixed(c.precision)):c.translateRangeFn({low:a,high:b})},c.combinedTranslation=function(a,b){return angular.isUndefined(o.translateCombinedFn)?c.translation(a)+" - "+c.translation(b):c.translateCombinedFn({low:a,high:b})},c.encode=function(a){return angular.isUndefined(o.scaleFn)||""==o.scaleFn?a:c.scaleFn({value:a})},c.decode=function(a){return angular.isUndefined(o.inverseScaleFn)||""==o.inverseScaleFn?a:c.inverseScaleFn({value:a})},(1!=Math.round(c.encode(c.decode(1)))||100!=Math.round(c.encode(c.decode(100))))&&console.warn("The scale and inverseScale functions are not perfect inverses: 1 = "+c.encode(c.decode(1))+"  100 = "+c.encode(c.decode(100))),c.decodeRef=function(a){return c.decode(c[a])},c.inputSteps=function(){return Math.pow(10,-1*c.precision)};for(var E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=1,Q=0,R=0,S=!1,T=0;T<C.length;T++)c.$watch(C[T],function(){y()});e(window).bind("resize",function(){y()}),c.$on("refreshSlider",function(){a(function(){y()})}),a(function(){y()})}}}}}]);